import os
import requests
import socket
import colorama
from colorama import Fore, Back, Style

colorama.init(autoreset=True)

def IP2Location():
    url = input(Fore.GREEN + "Enter the URL: ")
    report = input(Fore.GREEN + "Enter the file name for the report: ")
    report = os.path.join("reports", report)
    rep = open(report, "w")
    rep.close()
    
    try:
        if url.startswith("https://"):
            url = url[8:]  # Remove the "https://" prefix
        elif url.startswith("http://"):
            url = url[7:]  # Remove the "http://" prefix

        host = url.split("/")[0]  # Extract the hostname from the URL

        ip_address = socket.gethostbyname(host)
        adres = "http://ip-api.com/json/" + ip_address
        sonuc = requests.get(adres, verify=False).json()

        print(Fore.GREEN + "City:", sonuc.get('city', 'N/A'))
        print(Fore.GREEN + "Country:", sonuc.get('country', 'N/A'))
        print(Fore.GREEN + "Time Zone:", sonuc.get('timezone', 'N/A'))

        raporIcerik = "[+]City: " + sonuc.get('city', 'N/A') + "\n"
        raporIcerik += "[+]Country: " + sonuc.get('country', 'N/A') + "\n"
        raporIcerik += "[+]Time Zone: " + sonuc.get('timezone', 'N/A') + "\n"

        with open(report, "a") as rapor:
            rapor.write(raporIcerik)
    except:
        pass

if __name__ == '__main__':
    IP2Location()
